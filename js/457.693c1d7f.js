"use strict";(self["webpackChunkyour_economics"]=self["webpackChunkyour_economics"]||[]).push([[457],{2457:function(e,t,i){i.r(t),i.d(t,{default:function(){return y}});var r=i(3396),n=i(7139);const o={class:"page-title"},l={key:1,class:"center"},s={key:2},c={class:"progress"};function a(e,t,i,a,u,d){const g=(0,r.up)("loader"),p=(0,r.up)("router-link"),w=(0,r.Q2)("tooltip");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",o,[(0,r._)("h3",null,(0,n.zw)(d.localize("planning")),1),(0,r._)("h4",null,(0,n.zw)(d.currencyFilter(e.info.bill)),1)]),u.isLoading?((0,r.wg)(),(0,r.j4)(g,{key:0})):u.categories.length?((0,r.wg)(),(0,r.iD)("section",s,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(u.categories,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id},[(0,r._)("p",null,[(0,r._)("strong",null,(0,n.zw)(e.name)+":",1),(0,r.Uk)(" "+(0,n.zw)(d.currencyFilter(e.spending))+" из "+(0,n.zw)(d.currencyFilter(e.limit)),1)]),(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",c,[(0,r._)("div",{class:(0,n.C_)(["determinate",[e.progressColor]]),style:(0,n.j5)({width:e.progressPercent+"%"})},null,6)])),[[w,e.tooltipText]])])))),128))])):((0,r.wg)(),(0,r.iD)("p",l,[(0,r.Uk)((0,n.zw)(d.localize("emptyPlanning"))+" ",1),(0,r.Wm)(p,{to:"/categories"},{default:(0,r.w5)((()=>[(0,r.Uk)((0,n.zw)(d.localize("addCategory")),1)])),_:1})]))])}var u=i(2773),d=i(65),g=i(5632),p={components:{Loader:u.Z},name:"planning",data(){return{isLoading:!0,categories:[]}},async mounted(){const e=await this.$store.dispatch("fetchRecords"),t=await this.$store.dispatch("fetcCategories");this.categories=t.map((t=>{const i=e.filter((e=>e.id===t.id)).filter((e=>"outcome"===e.type)).reduce(((e,t)=>t.amount+=e),0),r=100*i/t.limit,n=r>100?100:r,o=r<70?"green":r<100?"yellow":"red",l=t.limit-i,s=`${l<0?`${(0,g.Z)("limitExceeded")}`:`${(0,g.Z)("left")}`} ${Math.abs(l)} ${(0,g.Z)("inputLimitCurrency")}.`;return{...t,progressColor:o,progressPercent:n,spending:i,tooltipText:s}})),console.log(this.categories),this.isLoading=!1},computed:{...(0,d.Se)(["info"])},methods:{localize:g.Z,currencyFilter(e,t="RUB"){return new Intl.NumberFormat("ru-RU",{style:"currency",currency:t}).format(e)}}},w=i(89);const m=(0,w.Z)(p,[["render",a]]);var y=m}}]);
//# sourceMappingURL=457.693c1d7f.js.map