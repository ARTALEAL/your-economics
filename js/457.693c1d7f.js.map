{"version":3,"file":"js/457.693c1d7f.js","mappings":"yMAESA,MAAM,c,SAKRA,MAAM,U,aAWAA,MAAM,Y,qHAjBjBC,EAAAA,EAAAA,IA0BM,aAzBJC,EAAAA,EAAAA,GAGM,MAHNC,EAGM,EAFJD,EAAAA,EAAAA,GAAmC,WAAAE,EAAAA,EAAAA,IAA5BC,EAAAC,SAAS,aAAD,IACfJ,EAAAA,EAAAA,GAAwC,WAAAE,EAAAA,EAAAA,IAAjCC,EAAAE,eAAeC,EAAAC,KAAKC,OAAI,KAEnBC,EAAAC,YAAS,WAAvBC,EAAAA,EAAAA,IAA2BC,EAAA,CAAAC,IAAA,KACGJ,EAAAK,WAAWC,S,WAIzChB,EAAAA,EAAAA,IAeU,UAAAiB,EAAA,gBAdRjB,EAAAA,EAAAA,IAaMkB,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAbkBT,EAAAK,YAAZK,K,WAAZpB,EAAAA,EAAAA,IAaM,OAb+Bc,IAAKM,EAASC,I,EACjDpB,EAAAA,EAAAA,GAII,WAHFA,EAAAA,EAAAA,GAAqC,eAAAE,EAAAA,EAAAA,IAA1BiB,EAASE,MAAO,IAAC,YAAS,KACrCnB,EAAAA,EAAAA,IAAGC,EAAAE,eAAec,EAASG,WAAY,QACvCpB,EAAAA,EAAAA,IAAGC,EAAAE,eAAec,EAASI,QAAK,2BAElCxB,EAAAA,EAAAA,IAMM,MANNyB,EAMM,EALJxB,EAAAA,EAAAA,GAIO,OAHLF,OAAK2B,EAAAA,EAAAA,IAAA,CAAC,cAAa,CACVN,EAASO,iBACjBC,OAAKC,EAAAA,EAAAA,IAAA,CAAAC,MAAWV,EAASW,gBAAkB,O,eAJfX,EAASY,oB,WAXC,WAA/ChC,EAAAA,EAAAA,IAGI,IAHJiC,EAGI,mBAFC7B,EAAAC,SAAS,kBAAmB,IAC/B,IAAA6B,EAAAA,EAAAA,IAAyEC,EAAA,CAA5DC,GAAG,eAAa,C,kBAAC,IAA6B,mBAA1BhC,EAAAC,SAAS,gBAAD,M,2CAyB/C,GACEgC,WAAY,CAAEC,OAAMA,EAAAA,GACpBhB,KAAM,WACNiB,IAAAA,GACE,MAAO,CACL5B,WAAW,EACXI,WAAY,GAEhB,EACA,aAAMyB,GACJ,MAAMC,QAAgBC,KAAKC,OAAOC,SAAS,gBACrC7B,QAAmB2B,KAAKC,OAAOC,SAAS,kBAC9CF,KAAK3B,WAAaA,EAAW8B,KAAKC,IAChC,MAAMvB,EAAWkB,EACdM,QAAQC,GAAQA,EAAI3B,KAAOyB,EAAIzB,KAC/B0B,QAAQC,GAAqB,YAAbA,EAAIC,OACpBC,QAAO,CAACC,EAAKC,IACJA,EAAIC,QAAUF,GACrB,GACCG,EAAW,IAAM/B,EAAYuB,EAAItB,MACjCO,EAAkBuB,EAAU,IAAM,IAAMA,EACxC3B,EACJ2B,EAAU,GAAK,QAAUA,EAAU,IAAM,SAAW,MAChDC,EAAeT,EAAItB,MAAQD,EAC3BS,EAAe,GACnBuB,EAAe,EACV,IAAElD,EAAAA,EAAAA,GAAS,mBACX,IAAEA,EAAAA,EAAAA,GAAS,aACdmD,KAAKC,IAAIF,OAAiBlD,EAAAA,EAAAA,GAAS,yBACvC,MAAO,IACFyC,EACHnB,gBACAI,kBACAR,WACAS,cACD,IAEH0B,QAAQC,IAAIjB,KAAK3B,YACjB2B,KAAK/B,WAAY,CACnB,EACAiD,SAAU,KACLC,EAAAA,EAAAA,IAAW,CAAC,UAEjBC,QAAS,CACPzD,SAAQ,IACRC,cAAAA,CAAeyD,EAAOC,EAAW,OAC/B,OAAO,IAAIC,KAAKC,aAAa,QAAS,CACpCtC,MAAO,WACPoC,aACCG,OAAOJ,EACZ,I,QC/EJ,MAAMK,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://your-economics/./src/views/Planning.vue","webpack://your-economics/./src/views/Planning.vue?4d61"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>{{ localize('planning') }}</h3>\r\n      <h4>{{ currencyFilter(info.bill) }}</h4>\r\n    </div>\r\n    <loader v-if=\"isLoading\" />\r\n    <p class=\"center\" v-else-if=\"!categories.length\">\r\n      {{ localize('emptyPlanning') }}\r\n      <router-link to=\"/categories\">{{ localize('addCategory') }}</router-link>\r\n    </p>\r\n    <section v-else>\r\n      <div v-for=\"category in categories\" :key=\"category.id\">\r\n        <p>\r\n          <strong>{{ category.name }}:</strong>\r\n          {{ currencyFilter(category.spending) }} из\r\n          {{ currencyFilter(category.limit) }}\r\n        </p>\r\n        <div class=\"progress\" v-tooltip=\"category.tooltipText\">\r\n          <div\r\n            class=\"determinate\"\r\n            :class=\"[category.progressColor]\"\r\n            :style=\"{ width: category.progressPercent + '%' }\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Loader from '@/components/app/Loader.vue';\r\nimport { mapGetters } from 'vuex';\r\nimport localize from '@/utils/localize';\r\nexport default {\r\n  components: { Loader },\r\n  name: 'planning',\r\n  data() {\r\n    return {\r\n      isLoading: true,\r\n      categories: [],\r\n    };\r\n  },\r\n  async mounted() {\r\n    const records = await this.$store.dispatch('fetchRecords');\r\n    const categories = await this.$store.dispatch('fetcCategories');\r\n    this.categories = categories.map((cat) => {\r\n      const spending = records\r\n        .filter((rec) => rec.id === cat.id)\r\n        .filter((rec) => rec.type === 'outcome')\r\n        .reduce((acc, cur) => {\r\n          return (cur.amount += acc);\r\n        }, 0);\r\n      const percent = (100 * spending) / cat.limit;\r\n      const progressPercent = percent > 100 ? 100 : percent;\r\n      const progressColor =\r\n        percent < 70 ? 'green' : percent < 100 ? 'yellow' : 'red';\r\n      const tooltipValue = cat.limit - spending;\r\n      const tooltipText = `${\r\n        tooltipValue < 0\r\n          ? `${localize('limitExceeded')}`\r\n          : `${localize('left')}`\r\n      } ${Math.abs(tooltipValue)} ${localize('inputLimitCurrency')}.`;\r\n      return {\r\n        ...cat,\r\n        progressColor,\r\n        progressPercent,\r\n        spending,\r\n        tooltipText,\r\n      };\r\n    });\r\n    console.log(this.categories);\r\n    this.isLoading = false;\r\n  },\r\n  computed: {\r\n    ...mapGetters(['info']),\r\n  },\r\n  methods: {\r\n    localize,\r\n    currencyFilter(value, currency = 'RUB') {\r\n      return new Intl.NumberFormat('ru-RU', {\r\n        style: 'currency',\r\n        currency,\r\n      }).format(value);\r\n    },\r\n  },\r\n};\r\n</script>\r\n","import { render } from \"./Planning.vue?vue&type=template&id=1f2d9c42\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_createElementVNode","_hoisted_1","_toDisplayString","$options","localize","currencyFilter","_ctx","info","bill","$data","isLoading","_createBlock","_component_loader","key","categories","length","_hoisted_3","_Fragment","_renderList","category","id","name","spending","limit","_hoisted_4","_normalizeClass","progressColor","style","_normalizeStyle","width","progressPercent","tooltipText","_hoisted_2","_createVNode","_component_router_link","to","components","Loader","data","mounted","records","this","$store","dispatch","map","cat","filter","rec","type","reduce","acc","cur","amount","percent","tooltipValue","Math","abs","console","log","computed","mapGetters","methods","value","currency","Intl","NumberFormat","format","__exports__","render"],"sourceRoot":""}