"use strict";(self["webpackChunkyour_economics"]=self["webpackChunkyour_economics"]||[]).push([[577],{9577:function(e,t,i){i.r(t),i.d(t,{default:function(){return Y}});var a=i(3396),l=i(7139);const n={class:"page-title"},r={key:1,class:"row"},s={key:1,class:"center"};function o(e,t,i,o,c,u){const d=(0,a.up)("loader"),m=(0,a.up)("category-create"),h=(0,a.up)("category-edit");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",n,[(0,a._)("h3",null,(0,l.zw)(u.localize("categoriesTitle")),1)]),(0,a._)("section",null,[c.isLoading?((0,a.wg)(),(0,a.j4)(d,{key:0})):((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(m,{onCreated:u.addNewCategory},null,8,["onCreated"]),c.categories.length?((0,a.wg)(),(0,a.j4)(h,{categories:c.categories,onUpdated:u.updateCategories,key:c.categories.length+c.updateCount},null,8,["categories","onUpdated"])):((0,a.wg)(),(0,a.iD)("p",s,(0,l.zw)(u.localize("categoriesEmptyMessage")),1))]))])])}i(560);var c=i(9242);const u={class:"col s12 m6"},d={class:"page-subtitle"},m={class:"input-field"},h={for:"name"},g={key:0,class:"helper-text invalid"},v={class:"input-field"},p={for:"limit"},y={key:0,class:"helper-text invalid"},$={class:"btn waves-effect waves-light",type:"submit"},w=(0,a._)("i",{class:"material-icons right"},"send",-1);function C(e,t,i,n,r,s){return(0,a.wg)(),(0,a.iD)("div",u,[(0,a._)("div",null,[(0,a._)("div",d,[(0,a._)("h4",null,(0,l.zw)(s.localize("createCategoryTitle")),1)]),(0,a._)("form",{onSubmit:t[4]||(t[4]=(0,c.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[(0,a._)("div",m,[(0,a.wy)((0,a._)("input",{id:"name",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>r.name=e),class:(0,l.C_)({invalid:e.v$.name.$error}),onBlur:t[1]||(t[1]=(...t)=>e.v$.name.$touch&&e.v$.name.$touch(...t))},null,34),[[c.nr,r.name]]),(0,a._)("label",h,(0,l.zw)(s.localize("createCategoryName")),1),e.v$.name.$error?((0,a.wg)(),(0,a.iD)("span",g,(0,l.zw)(s.localize("createCategoryNameError")),1)):(0,a.kq)("",!0)]),(0,a._)("div",v,[(0,a.wy)((0,a._)("input",{id:"limit",type:"number","onUpdate:modelValue":t[2]||(t[2]=e=>r.limit=e),class:(0,l.C_)({invalid:e.v$.limit.$error}),onBlur:t[3]||(t[3]=(...t)=>e.v$.limit.$touch&&e.v$.limit.$touch(...t))},null,34),[[c.nr,r.limit,void 0,{number:!0}]]),(0,a._)("label",p,(0,l.zw)(s.localize("inputLimitPlaceholder")),1),e.v$.limit.$error?((0,a.wg)(),(0,a.iD)("span",y,(0,l.zw)(s.localize("inputLimit"))+" "+(0,l.zw)(e.v$.limit.minValue.$params.min)+" "+(0,l.zw)(s.localize("inputLimitCurrency"))+".",1)):(0,a.kq)("",!0)]),(0,a._)("button",$,[(0,a.Uk)((0,l.zw)(s.localize("createBtn"))+" ",1),w])],32)])])}var z=i(4219),_=i(5420),f=i(5632),b={name:"categoryCreate",setup:()=>({v$:(0,z.Xw)()}),data(){return{name:"",limit:""}},validations(){return{name:{required:_.C1},limit:{required:_.C1,minValue:(0,_.uv)(1)}}},methods:{localize:f.Z,async handleSubmit(){if(this.v$.$invalid)return this.v$.$touch(),void console.log("invalid");const e={name:this.name,limit:this.limit};try{const t=await this.$store.dispatch("createCategory",e);console.log(t),this.name="",this.limit="",this.v$.$reset(),this.$message((0,f.Z)("createdCategoryMessage")),this.$emit("created",t)}catch(t){}}}},k=i(89);const D=(0,k.Z)(b,[["render",C]]);var L=D;const S={class:"col s12 m6"},U={class:"page-subtitle"},V={class:"input-field"},Z=["value"],q={class:"input-field"},x={for:"name"},B={key:0,class:"helper-text invalid"},N={class:"input-field"},E={for:"limit"},T={key:0,class:"helper-text invalid"},j={class:"btn waves-effect waves-light",type:"submit"},F=(0,a._)("i",{class:"material-icons right"},"send",-1);function P(e,t,i,n,r,s){return(0,a.wg)(),(0,a.iD)("div",S,[(0,a._)("div",null,[(0,a._)("div",U,[(0,a._)("h4",null,(0,l.zw)(s.localize("editCategoryTitle")),1)]),(0,a._)("form",{onSubmit:t[5]||(t[5]=(0,c.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[(0,a._)("div",V,[(0,a.wy)((0,a._)("select",{ref:"select","onUpdate:modelValue":t[0]||(t[0]=e=>r.currentCategory=e)},[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.categories,(e=>((0,a.wg)(),(0,a.iD)("option",{key:e.id,value:e.id},(0,l.zw)(e.name),9,Z)))),128))],512),[[c.bM,r.currentCategory]]),(0,a._)("label",null,(0,l.zw)(s.localize("editCategorySelect")),1)]),(0,a._)("div",q,[(0,a.wy)((0,a._)("input",{id:"name",type:"text","onUpdate:modelValue":t[1]||(t[1]=e=>r.name=e),class:(0,l.C_)({invalid:e.v$.name.$error}),onBlur:t[2]||(t[2]=(...t)=>e.v$.name.$touch&&e.v$.name.$touch(...t))},null,34),[[c.nr,r.name]]),(0,a._)("label",x,(0,l.zw)(s.localize("createCategoryName")),1),e.v$.name.$error?((0,a.wg)(),(0,a.iD)("span",B,(0,l.zw)(s.localize("createCategoryNameError")),1)):(0,a.kq)("",!0)]),(0,a._)("div",N,[(0,a.wy)((0,a._)("input",{id:"limit",type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>r.limit=e),class:(0,l.C_)({invalid:e.v$.limit.$error}),onBlur:t[4]||(t[4]=(...t)=>e.v$.limit.$touch&&e.v$.limit.$touch(...t))},null,34),[[c.nr,r.limit,void 0,{number:!0}]]),(0,a._)("label",E,(0,l.zw)(s.localize("inputLimitPlaceholder")),1),e.v$.limit.$error?((0,a.wg)(),(0,a.iD)("span",T,(0,l.zw)(s.localize("inputLimit"))+" "+(0,l.zw)(e.v$.limit.minValue.$params.min)+" "+(0,l.zw)(s.localize("inputLimitCurrency"))+".",1)):(0,a.kq)("",!0)]),(0,a._)("button",j,[(0,a.Uk)((0,l.zw)(s.localize("updateBtn"))+" ",1),F])],32)])])}var X={name:"categoryEdit",data(){return{select:null,name:"",limit:"",currentCategory:null}},setup:()=>({v$:(0,z.Xw)()}),props:{categories:{type:Array,default:[]}},created(){const{name:e,limit:t,id:i}=this.categories[0];this.name=e,this.currentCategory=i,this.limit=t},mounted(){this.select=M.FormSelect.init(this.$refs.select),M.updateTextFields()},watch:{currentCategory(e){const{name:t,limit:i}=this.categories.find((t=>t.id===e));this.name=t,this.limit=i}},unmounted(){this.select&&this.select.destroy&&this.select.unmount},validations(){return{name:{required:_.C1},limit:{required:_.C1,minValue:(0,_.uv)(1)}}},methods:{localize:f.Z,async handleSubmit(){if(this.v$.$invalid)return void this.v$.$touch;const e={id:this.currentCategory,name:this.name,limit:this.limit};try{await this.$store.dispatch("updateCategory",e),this.$message((0,f.Z)("editCategoryMessage")),this.$emit("updated",e)}catch(t){}}}};const A=(0,k.Z)(X,[["render",P]]);var H=A,I=i(2773),K={name:"categories",components:{CategoryCreate:L,CategoryEdit:H,Loader:I.Z},data(){return{categories:[],isLoading:!0,updateCount:0}},methods:{localize:f.Z,addNewCategory(e){this.categories.push(e),console.log(this.categories)},updateCategories(e){const t=this.categories.findIndex((t=>t.id===e.id));this.categories[t].name=e.name,this.categories[t].limit=e.limit,this.updateCount++}},async mounted(){this.categories=await this.$store.dispatch("fetcCategories"),this.isLoading=!1}};const W=(0,k.Z)(K,[["render",o]]);var Y=W}}]);
//# sourceMappingURL=577.76093bd5.js.map