"use strict";(self["webpackChunkyour_economics"]=self["webpackChunkyour_economics"]||[]).push([[754],{4754:function(e,t,i){i.r(t),i.d(t,{default:function(){return S}});var o=i(3396),n=i(7139),a=i(9242);const s={class:"page-title"},l={key:1,class:"center"},r={class:"input-field"},c=["value"],u={class:"input-field"},d={for:"amount"},p={key:0,class:"helper-text invalid"},m={class:"input-field"},h={for:"description"},y={key:0,class:"helper-text invalid"},g={class:"btn waves-effect waves-light",type:"submit"},w=(0,o._)("i",{class:"material-icons right"},"send",-1);function v(e,t,i,v,$,f){const z=(0,o.up)("loader"),_=(0,o.up)("router-link");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",s,[(0,o._)("h3",null,(0,n.zw)(f.localize("newRecord")),1)]),$.isLoading?((0,o.wg)(),(0,o.j4)(z,{key:0})):$.categories.length?((0,o.wg)(),(0,o.iD)("form",{key:2,class:"form",onSubmit:t[7]||(t[7]=(0,a.iM)(((...e)=>f.handleSubmit&&f.handleSubmit(...e)),["prevent"]))},[(0,o._)("div",r,[(0,o.wy)((0,o._)("select",{ref:"select","onUpdate:modelValue":t[0]||(t[0]=e=>$.currentCategory=e)},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)($.categories,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e.id,value:e.id},(0,n.zw)(e.name),9,c)))),128))],512),[[a.bM,$.currentCategory]]),(0,o._)("label",null,(0,n.zw)(f.localize("editCategorySelect")),1)]),(0,o._)("p",null,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{class:"with-gap",name:"type",type:"radio",value:"income","onUpdate:modelValue":t[1]||(t[1]=e=>$.type=e)},null,512),[[a.G2,$.type]]),(0,o._)("span",null,(0,n.zw)(f.localize("income")),1)])]),(0,o._)("p",null,[(0,o._)("label",null,[(0,o.wy)((0,o._)("input",{class:"with-gap",name:"type",type:"radio",value:"outcome","onUpdate:modelValue":t[2]||(t[2]=e=>$.type=e)},null,512),[[a.G2,$.type]]),(0,o._)("span",null,(0,n.zw)(f.localize("outcome")),1)])]),(0,o._)("div",u,[(0,o.wy)((0,o._)("input",{id:"amount",type:"number","onUpdate:modelValue":t[3]||(t[3]=e=>$.amount=e),class:(0,n.C_)({invalid:e.v$.amount.$error}),onBlur:t[4]||(t[4]=(...t)=>e.v$.amount.$touch&&e.v$.amount.$touch(...t))},null,34),[[a.nr,$.amount,void 0,{number:!0}]]),(0,o._)("label",d,(0,n.zw)(f.localize("amount")),1),e.v$.amount.$error?((0,o.wg)(),(0,o.iD)("span",p,(0,n.zw)(f.localize("inputLimit"))+" "+(0,n.zw)(e.v$.amount.minValue.$params.min)+" "+(0,n.zw)(f.localize("inputLimitCurrency"))+".",1)):(0,o.kq)("",!0)]),(0,o._)("div",m,[(0,o.wy)((0,o._)("input",{id:"description",type:"text","onUpdate:modelValue":t[5]||(t[5]=e=>$.description=e),class:(0,n.C_)({invalid:e.v$.description.$error}),onBlur:t[6]||(t[6]=(...t)=>e.v$.description.$touch&&e.v$.description.$touch(...t))},null,34),[[a.nr,$.description]]),(0,o._)("label",h,(0,n.zw)(f.localize("description")),1),e.v$.description.$error?((0,o.wg)(),(0,o.iD)("span",y,(0,n.zw)(f.localize("descriptionError")),1)):(0,o.kq)("",!0)]),(0,o._)("button",g,[(0,o.Uk)((0,n.zw)(f.localize("createBtn"))+" ",1),w])],32)):((0,o.wg)(),(0,o.iD)("p",l,[(0,o.Uk)((0,n.zw)(f.localize("categoriesEmptyMessage"))+" ",1),(0,o.Wm)(_,{to:"/categories"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,n.zw)(f.localize("createCategory")),1)])),_:1})]))])}var $=i(2773),f=i(4219),z=i(5420),_=i(65),b=i(5632),C={name:"record",setup:()=>({v$:(0,f.Xw)()}),components:{Loader:$.Z},data(){return{isLoading:!0,categories:[],select:null,currentCategory:null,type:"outcome",amount:"",description:""}},async mounted(){this.categories=await this.$store.dispatch("fetcCategories"),this.isLoading=!1,this.categories.length&&(this.currentCategory=this.categories[0].id),setTimeout((()=>{this.select=M.FormSelect.init(this.$refs.select)}),0)},unmounted(){this.select&&this.select.destroy&&(this.select.unmount,console.log("unmount"))},validations(){return{description:{required:z.C1},amount:{required:z.C1,minValue:(0,z.uv)(1)}}},computed:{...(0,_.Se)(["info"]),canCreateRecord(){return"income"===this.type||this.info.bill>=this.amount}},methods:{localize:b.Z,async handleSubmit(){if(this.v$.$invalid)return void this.v$.$touch;const e={description:this.description,amount:this.amount,id:this.currentCategory,type:this.type,date:(new Date).toJSON()};try{if(this.canCreateRecord){await this.$store.dispatch("createRecord",e);const t="income"===this.type?this.info.bill+this.amount:this.info.bill-this.amount;await this.$store.dispatch("updateInfo",{bill:t}),this.$message((0,b.Z)("successMessage")),this.v$.$reset(),this.amount="",this.description=""}else this.$message(`${(0,b.Z)("recordErrorMessage")} ${this.amount-this.info.bill} ${(0,b.Z)("recordErrorMessageCur")}`)}catch(t){}}}},k=i(89);const D=(0,k.Z)(C,[["render",v]]);var S=D}}]);
//# sourceMappingURL=754.75cd801c.js.map